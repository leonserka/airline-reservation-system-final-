{% extends 'flights/base.html' %}
{% load tz %}

{% block content %}
<h1>Booked Flights</h1>

{% if tickets %}
    <table border="1">
        <tr>
            <th>Flight</th>
            <th>Local Time</th>
            <th>Seat</th>
            <th>Price</th>
            <th>Payment Status</th>
            <th>Action</th>
        </tr>

        {% for ticket in tickets %}
            <tr>
                <td>
                    {{ ticket.flight.departure_city }} â†’ {{ ticket.flight.arrival_city }}
                </td>

                <td>
                    ðŸ›« {{ ticket.flight.departure_datetime|timezone:ticket.flight.departure_timezone|date:"Y-m-d H:i" }}<br>
                    ðŸ›¬ {{ ticket.flight.arrival_datetime|timezone:ticket.flight.arrival_timezone|date:"Y-m-d H:i" }}
                </td>

                <td>{{ ticket.seat_number }} ({{ ticket.seat_class }})</td>
                <td>â‚¬{{ ticket.price_paid }}</td>
                <td>{{ ticket.payment_status|capfirst }}</td>

                <td>
                    <a href="{% url 'about_ticket' ticket.id %}">About Ticket</a>
                </td>
            </tr>
        {% endfor %}
    </table>
{% else %}
    <p>You have not booked any flights yet.</p>
{% endif %}

<a href="{% url 'home' %}" class="btn btn-primary">Return Home</a>

{% endblock %}

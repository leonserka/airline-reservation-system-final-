{% load static %}

<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <title>Airline Reservation System</title>

    <link rel="stylesheet" href="{% static 'flights/css/login_dropdown.css' %}">
    <link rel="stylesheet" href="{% static 'flights/css/home_carousel.css' %}">
    <link rel="stylesheet" href="{% static 'flights/css/home_search.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>

<header class="ca-header">

    <div class="ca-left">
        <a href="{% url 'home' %}" class="brand-text">AIRLINE RESERVATION</a>
    </div>

    <div class="ca-right">

        <div class="ca-icon search-icon">üîç</div>

        <div class="lang-box">hr</div>

        {% if not user.is_authenticated %}
            <button id="loginDropdownBtn" class="login-btn">Login</button>
        {% else %}
            <span class="user-welcome">Hi, {{ user.username }}</span>
            <a href="{% url 'logout' %}" class="logout-link">Logout</a>
        {% endif %}

        <div class="menu-box">
            <span>Menu</span>
            <div class="hamburger">
                <span></span><span></span><span></span>
            </div>
        </div>

    </div>

</header>

{% if user.is_authenticated %}
<script>window.isLogged = true;</script>
{% else %}
<script>window.isLogged = false;</script>
{% endif %}

<div class="home-carousel">

    <div class="slide active" style="background-image: url('{% static "flights/img/promo1.jpg" %}')">
        <div class="caption">
            <h1>Split ‚Üí Barcelona from 60 ‚Ç¨</h1>
            <a href="#" class="more">Find out more</a>
        </div>
    </div>

    <div class="slide" style="background-image: url('{% static "flights/img/promo2.jpg" %}')">
        <div class="caption">
            <h1>Zagreb ‚Üí Lisabon from 100 ‚Ç¨</h1>
            <a href="#" class="more">Find out more</a>
        </div>
    </div>

    <div class="slide" style="background-image: url('{% static "flights/img/promo3.jpg" %}')">
        <div class="caption">
            <h1>Dubrovnik ‚Üí Rim from 75 ‚Ç¨</h1>
            <a href="#" class="more">Find out more</a>
        </div>
    </div>

    <div class="slide" style="background-image: url('{% static "flights/img/promo4.jpg" %}')">
        <div class="caption">
            <h1>Split ‚Üí Helsinki from 110 ‚Ç¨</h1>
            <a href="#" class="more">Find out more</a>
        </div>
    </div>

    <div class="slide" style="background-image: url('{% static "flights/img/promo5.jpg" %}')">
        <div class="caption">
            <h1>Zagreb ‚Üí Split from 45 ‚Ç¨</h1>
            <a href="#" class="more">Find out more</a>
        </div>
    </div>

    <div class="carousel-arrow left" id="prevSlide">‚ùÆ</div>
    <div class="carousel-arrow right" id="nextSlide">‚ùØ</div>

</div>

<script src="{% static 'flights/js/home_carousel.js' %}"></script>

<div class="search-container">
    <div class="search-box">

        <div class="search-input" id="fromBox">
            <label>From</label>
            <input type="text" id="fromInput" placeholder="Departure" readonly>
            <div class="dropdown-panel" id="fromDropdown"></div>
        </div>

        <div class="swap-btn" id="swapBtn">‚áÑ</div>

        <div class="search-input" id="toBox">
            <label>To</label>
            <input type="text" id="toInput" placeholder="Destination" readonly>
            <div class="dropdown-panel" id="toDropdown"></div>
        </div>

        <div class="search-input small">
            <label>Depart</label>
            <input type="text" id="departDate" placeholder="Choose date" readonly>
        </div>

        <div class="search-input small">
            <label>Return</label>
            <input type="text" id="returnDate" placeholder="Choose date" readonly>
        </div>

        <div class="search-input small trip-type-box">
            <label><input type="radio" name="tripType" value="oneway" checked> One way</label>
            <label><input type="radio" name="tripType" value="round"> Return</label>
        </div>

        <button id="homeSearchBtn" class="search-btn">Search</button>
    </div>
</div>

{% if not user.is_authenticated %}
<div id="loginDropdown" class="login-dropdown hidden">
    <div class="dropdown-header">
        <span>Login</span>
        <button id="closeLoginDropdown" class="close-btn">‚úï</button>
    </div>

    <form method="POST" action="{% url 'login' %}">
        {% csrf_token %}

        <label>Username *</label>
        <input type="text" name="username" required>

        <label>Password *</label>
        <input type="password" name="password" required>

        <div class="links">
            <a href="{% url 'register' %}">Register</a><br>
            <a href="{% url 'password_reset' %}">Forgot password</a>
        </div>

        <button type="submit" class="login-submit">Login</button>
    </form>
</div>
{% endif %}

<main style="padding: 40px;">

    {% if user.is_authenticated %}

        {% if user.is_staff %}
            <a href="{% url 'create_flight' %}">Add Flight</a>
        {% else %}
            <a href="{% url 'flight_list' %}">Book a Flight</a>
            <a href="{% url 'check_booked_flights' %}">Check Booked Flights</a>
        {% endif %}
        <br><br>

    {% else %}
        <p>Dobrodo≈°li! Prijavite se za nastavak.</p>
    {% endif %}

</main>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="{% static 'flights/js/login_dropdown.js' %}"></script>
<script src="{% static 'flights/js/home_search.js' %}"></script>

</body>
</html>

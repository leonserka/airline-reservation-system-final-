{% extends 'flights/base.html' %}
{% load static %}
{% block content %}

<h1>Step 4: Payment Details</h1>

<p>
  Flight: {{ flight.departure_city }} → {{ flight.arrival_city }} | {{ flight.date }}
</p>

<h3>Total Price: €{{ total_price }}</h3>

<hr>

<div id="loading-overlay" class="loading-overlay">
  <div class="loading-box">
    <h2>Processing your payment...</h2>
    <p>Please wait a few seconds ⏳</p>
  </div>
</div>

<div id="paypal-button-container" style="max-width: 400px; margin-top: 20px;"></div>

<link rel="stylesheet" href="{% static 'flights/book_step5.css' %}">

<script src="https://www.paypal.com/sdk/js?client-id={{ PAYPAL_CLIENT_ID }}&currency=EUR"></script>

<script>
  const TOTAL_PRICE = "{{ total_price }}";
  const CSRF_TOKEN = "{{ csrf_token }}";
  const BOOK_SUCCESS_URL = "{% url 'book_success' %}";
</script>

<script src="{% static 'flights/book_step5.js' %}"></script>

{% endblock %}
